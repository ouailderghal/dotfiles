#!/usr/bin/env python

from pathlib import Path
import pathlib

HOME = Path.home()
CONFIG = HOME.joinpath('.config')

dotfiles = [
    ('alacritty', CONFIG.joinpath('alacritty')),
    ('awesome', CONFIG.joinpath('awesome')),
    ('bash', HOME),
    ('emacs', HOME.joinpath('.emacs.d')),
    ('i3', CONFIG.joinpath('i3')),
    ('i3status', CONFIG.joinpath('i3status')),
    ('neofetch', CONFIG.joinpath('neofetch')),
    ('nvim', CONFIG.joinpath('nvim')),
    ('tmux', CONFIG.joinpath('tmux')),
    ('xmodmap', HOME)
]


def check_stow() -> bool:
    from shutil import which
    return which('stow') is not None


def stow(name: str, target: pathlib.Path) -> None:
    """
    Deploy config directory using GNU stow

    :param name: config name
    :param target: path to deploy the config
    """
    from os import system
    target.mkdir(parents=True, exist_ok=True)
    command = f'stow {name} -t {target}'
    system(command)


def main() -> None:
    d = Deployer()
    d.deploy()


if __name__ == '__main__':
    main()
