#!/usr/bin/env python

from pathlib import Path
import pathlib

HOME = Path.home()
CONFIG = HOME.joinpath('.config')

dotfiles = [
    ('alacritty', CONFIG.joinpath('alacritty')),
    ('awesome', CONFIG.joinpath('awesome')),
    ('bash', HOME),
    ('emacs', HOME.joinpath('.emacs.d')),
    ('i3', CONFIG.joinpath('i3')),
    ('i3status', CONFIG.joinpath('i3status')),
    ('neofetch', CONFIG.joinpath('neofetch')),
    ('nvim', CONFIG.joinpath('nvim')),
    ('tmux', CONFIG.joinpath('tmux')),
    ('xmodmap', HOME)
]


def which_stow() -> bool:
    """
    Check if GNU stow is available in your PATH
    :return: True if stow is installed, otherwise False
    """
    from shutil import which
    return which('stow') is not None


def stow(name: str, target: pathlib.Path) -> bool:
    """
    Deploy config directory using GNU stow
    :param name: config name
    :param target: path to deploy the config
    """
    import subprocess
    target.mkdir(parents=True, exist_ok=True)
    command = f'stow {name} -t {target}'
    result = subprocess.run(command, shell=True, stdout=subprocess.PIPE)
    return True if result.returncode == 0 else False


def main() -> None:
    pass


if __name__ == '__main__':
    main()
